# 🚀 تعليمات البناء مع المستخدم التجريبي - الإصدار 1.0.7+12

## ✅ **تم إضافة المستخدم التجريبي للجوجل بلاي**

### 📱 **معلومات الإصدار:**
- **الإصدار:** 1.0.7
- **رقم البناء:** 12
- **التاريخ:** يناير 2025
- **النوع:** تحديث مع مستخدم تجريبي

## 👤 **معلومات المستخدم التجريبي:**

### **لجوجل بلاي:**
- **رقم الهاتف:** `971999999999`
- **كود OTP:** `0000`

### **للمطور (للاختبار):**
- **رقم الهاتف:** `971508949923`
- **كود OTP:** `0000`

## 🔧 **التعديلات المطبقة:**

### **1. ملف `lib/login_screen.dart`:**
```dart
// تم إضافة المستخدم التجريبي الجديد
final String otpCode = (phoneNumber == '971508949923' || phoneNumber == '971999999999')
    ? '0000'
    : (1000 + (DateTime.now().millisecondsSinceEpoch % 9000))
        .toString();
```

### **2. ملف `lib/otp_screen.dart`:**
```dart
// تم إضافة منطق للتحقق من المستخدم التجريبي
bool isDemoUser = (widget.phoneNumber == '971508949923' || widget.phoneNumber == '971999999999');
bool isCorrectOtp = (enteredOtp == storedOtp) || (isDemoUser && enteredOtp == '0000');
```

## 🚀 **البناء والرفع:**

### **الحل الأول (الأسهل والأسرع):**
1. **افتح File Explorer**
2. **انتقل إلى:** `C:\car_wash_app`
3. **انقر مرتين على:** **`build_aab_final_v12.bat`**
4. **انتظر** حتى يكتمل البناء (5-10 دقائق)

### **الحل الثاني (PowerShell):**
1. **اضغط Win + R**
2. **اكتب:** `powershell`
3. **اضغط Enter**
4. **انتقل إلى المجلد:**
   ```powershell
   cd C:\car_wash_app
   ```
5. **شغل الملف:**
   ```powershell
   .\build_aab_final_v12.ps1
   ```

### **الحل الثالث (يدوي):**
```bash
cd C:\car_wash_app
flutter clean
flutter pub get
flutter build appbundle --release
```

## 📁 **موقع ملف AAB:**
```
C:\car_wash_app\build\app\outputs\bundle\release\app-release.aab
```

## 🎯 **النتيجة المتوقعة:**

### عند نجاح البناء:
```
✅ SUCCESS: AAB file created successfully!

📁 File location: build\app\outputs\bundle\release\app-release.aab
📱 Version: 1.0.7+12 (Demo User Added)
📊 Expected file size: 15-25 MB

🚀 Ready for Google Play upload!

Demo User Info:
📞 Phone: 971999999999
🔑 OTP Code: 0000

Next steps:
1. Go to https://play.google.com/console
2. Select your app
3. Go to Production → Create new release
4. Upload the AAB file
5. Add release notes
6. Start review process
```

## 🎯 **رفع الملف على Google Play:**

1. **اذهب إلى:** https://play.google.com/console
2. **اختر تطبيق:** Car Wash
3. **اذهب إلى:** Production → Create new release
4. **في قسم "App bundles":**
   - **انقر على "Upload"**
   - **اختر الملف:** `app-release.aab`
   - **انتظر** حتى يكتمل الرفع
5. **أضف ملاحظات الإصدار:**
   ```
   الإصدار 1.0.7
   
   🔧 إصلاحات:
   - دعم أرقام الهواتف من دول مختلفة (للاختبار)
   - تحسين معالجة أرقام الهواتف
   - إصلاحات وتحسينات عامة
   
   🎨 تحسينات:
   - واجهة مستخدم محسنة
   - رسائل خطأ أكثر وضوحاً
   - تجربة مستخدم محسنة
   
   ⚡ استقرار:
   - تحسين الأداء العام
   - معالجة أفضل للأخطاء
   - استقرار النظام
   
   🆕 جديد:
   - دعم السعودية للاختبار (966XXXXXXXXX)
   - شفافية كاملة في الواجهة
   - أمان محسن للمستخدمين العاديين
   - مستخدم تجريبي للجوجل بلاي (971999999999)
   ```
6. **انقر على "Save"**
7. **انقر على "Review release"**
8. **انقر على "Start rollout to Production"**

## 👤 **معلومات المستخدم التجريبي للجوجل بلاي:**

### **كيفية الاستخدام:**
1. **افتح التطبيق**
2. **اختر "Login"**
3. **أدخل رقم الهاتف:** `971999999999`
4. **اضغط "Send OTP"**
5. **أدخل كود OTP:** `0000`
6. **اضغط "Verify"**
7. **تم تسجيل الدخول بنجاح!**

### **الوظائف المتاحة:**
- ✅ **تسجيل الدخول:** تسجيل دخول بنجاح
- ✅ **إدارة السيارات:** إضافة وتعديل وحذف السيارات
- ✅ **الطلبات:** إنشاء طلبات جديدة ومتعددة السيارات
- ✅ **الدفع:** اختبار عملية الدفع واستخدام الباقات
- ✅ **تتبع الطلبات:** عرض وتتبع الطلبات السابقة

## 🔒 **الأمان:**

### **المستخدمين المسموح لهم بـ OTP = 0000:**
- ✅ `971508949923` - المستخدم التجريبي القديم (للمطور)
- ✅ `971999999999` - المستخدم التجريبي الجديد (لجوجل بلاي)

### **جميع المستخدمين الآخرين:**
- 🔐 يحصلون على OTP عشوائي من 4 أرقام
- 🔐 يجب إدخال الكود الصحيح للدخول

## 🔧 **استكشاف الأخطاء:**

### إذا فشل البناء:
1. **تأكد من وجود `android/key.properties`**
2. **تأكد من صحة كلمات مرور التوقيع**
3. **تأكد من وجود ملف keystore**
4. **تأكد من تثبيت Android SDK**

### إذا لم يتم إنشاء الملف:
1. **تحقق من مساحة القرص المتاحة**
2. **تأكد من صلاحيات الكتابة**
3. **تحقق من إعدادات التوقيع**

### إذا فشل الرفع:
1. **تأكد من أن الملف صحيح**
2. **تأكد من أن الإصدار جديد (12)**
3. **تأكد من صحة التوقيع**

## 📊 **ملفات البناء المحدثة:**

### **ملفات الإصدار:**
- ✅ `pubspec.yaml` - `1.0.7+12`
- ✅ `build_aab_final_v12.bat` - ملف Batch جديد
- ✅ `build_aab_final_v12.ps1` - ملف PowerShell جديد

### **ملفات التوثيق:**
- ✅ `DEMO_USER_SETUP.md` - إعداد المستخدم التجريبي
- ✅ `DEMO_USER_BUILD_INSTRUCTIONS.md` - هذا الملف

## 🎉 **النتيجة النهائية:**

- ✅ **الإصدار:** 1.0.7+12 (جديد مع مستخدم تجريبي)
- ✅ **Google Play:** جاهز للرفع بدون مشاكل
- ✅ **المستخدم التجريبي:** متاح للجوجل بلاي
- ✅ **الوظائف:** جميع الوظائف متاحة للمستخدم التجريبي
- ✅ **الأمان:** المستخدمين العاديين محميون

## ⚠️ **ملاحظات مهمة:**

1. **لا تحذف الإصدارات السابقة** من Google Play Console
2. **تأكد من اختبار التطبيق** قبل الرفع
3. **احتفظ بنسخة احتياطية** من ملف AAB
4. **راقب تقارير الأخطاء** بعد الرفع
5. **قدم معلومات المستخدم التجريبي** لجوجل بلاي

## 🆘 **إذا استمرت المشكلة:**

1. **تحقق من إعدادات Flutter:**
   ```bash
   flutter doctor
   ```

2. **تحقق من إعدادات Android:**
   ```bash
   flutter doctor --android-licenses
   ```

3. **تحقق من ملف التوقيع:**
   - تأكد من وجود `android/key.properties`
   - تأكد من صحة كلمات المرور

---

**🚀 جرب الحل الأول (تشغيل ملف Batch مباشرة) فهو الأسهل والأسرع!**

**ملف `build_aab_final_v12.bat` يحتوي على معالجة شاملة للأخطاء ورسائل واضحة لمساعدتك في حل أي مشكلة.**

**الإصدار 1.0.7+12 مع المستخدم التجريبي جاهز للرفع على Google Play Store! 🎉**

**يمكن لجوجل بلاي الآن مراجعة التطبيق بسهولة باستخدام الرقم `971999999999` وكود OTP `0000`.** 